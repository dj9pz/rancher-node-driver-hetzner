(("undefined"!==typeof self?self:this)["webpackChunkhetzner_node_driver_0_1_0"]=("undefined"!==typeof self?self:this)["webpackChunkhetzner_node_driver_0_1_0"]||[]).push([[921],{839:function(e,a,l){"use strict";l.r(a),l.d(a,{default:function(){return H}});var r=l(9274),t=l(4409),i=l(2404),s=l(8876),n=l(6187),o=l(5756);function d(e,a,l){return(a=c(a))in e?Object.defineProperty(e,a,{value:l,enumerable:!0,configurable:!0,writable:!0}):e[a]=l,e}function c(e){var a=v(e,"string");return"symbol"==typeof a?a:a+""}function v(e,a){if("object"!=typeof e||!e)return e;var l=e[Symbol.toPrimitive];if(void 0!==l){var r=l.call(e,a||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===a?String:Number)(e)}class u{constructor(e){d(this,"credentialId",void 0),d(this,"BASE_URL","/meta/proxy/api.hetzner.cloud/v1"),this.credentialId=e}async getLocations(){const e=await this.request("/locations");return e.locations.map(e=>({value:e.name,label:`${e.name} (${e.description})`}))}async getServerTypes(e){const a=await this.request("/server_types?per_page=50");let l=a.server_types.filter(e=>!e.deprecated);return e&&(l=l.filter(a=>a.prices.some(a=>a.location===e))),l.map(a=>{let l="";if(e){const r=a.prices.find(a=>a.location===e);r&&(l=`â‚¬${Number(r.price_monthly.gross).toFixed(2)}/mo, `)}return{value:a.name,label:`${a.name} (${l}${a.architecture}, ${a.cores} vCPU, ${a.memory} GB RAM, ${a.disk} GB SSD)`}})}async getImages(){const e=await this.request("/images?per_page=50");return e.images.map(e=>({value:e.id,label:`${e.name} (${e.architecture}) - ${e.description}`}))}async getPlacementGroups(){const e=await this.request("/placement_groups?per_page=50");return e.placement_groups.map(e=>({value:e.id,label:e.name}))}async getNetworks(){const e=await this.request("/networks?per_page=50");return e.networks.map(e=>({value:e.id,label:`${e.name} (${e.ip_range})`}))}async getFirewalls(){const e=await this.request("/firewalls?per_page=50");return e.firewalls.map(e=>({value:e.id,label:e.name}))}async getSshKeys(){const e=await this.request("/ssh_keys?per_page=50");return e.ssh_keys.map(e=>({value:e.id,label:e.name}))}async request(e,a="GET",l){const r=`${this.BASE_URL}${e}`,t={"X-Api-CattleAuth-Header":`Bearer credID=${this.credentialId} passwordField=apiToken`};l&&(t["Content-Type"]="application/json");const i=await fetch(r,{method:a,headers:t,body:l?JSON.stringify(l):void 0});if(!i.ok)throw new Error(`HTTP error! status: ${i.status}`);return i.json()}}var p=l(1135),m=l(4364);const b={class:"hetzner-config"},h={class:"mt-20 mb-20"},g={class:"row mt-10"},w={class:"col span-12"},y={class:"row mt-10"},f={class:"col span-6"},I={class:"col span-6"},N={class:"row mt-10"},k={class:"col span-12"},P={class:"mt-30 mb-20"},V={class:"row mt-10 vcenter"},z={class:"col span-6"},E={class:"col span-6"},_={class:"row mt-20"},T={class:"col span-4"},A={class:"col span-4"},S={class:"col span-4"},U={class:"row mt-20 vcenter"},L={class:"col span-6"},G={class:"col span-6"},D={class:"mt-30 mb-20"},C={class:"row mt-10"},$={class:"col span-12"},K={class:"mb-5"},j={class:"description mb-10"},B={class:"row mt-10"},q={class:"col span-12"},x=(0,r.defineComponent)({mixins:[p.A]});var F=(0,r.defineComponent)({...x,__name:"hetzner",props:{uuid:{},cluster:{default:()=>({})},value:{},credentialId:{},provider:{},disabled:{type:Boolean,default:!1},busy:{type:Boolean,default:!1}},emits:["validationChanged"],setup(e,{emit:a}){const l=e,d=a,c=(0,r.ref)({locations:[],serverTypes:[],serverImages:[],sshKeys:[],firewalls:[],networks:[],placementGroups:[]}),v=(0,r.reactive)({disablePublicNetwork:!1,disablePublicIpv4:!1,disablePublicIpv6:!1,usePrivateNetwork:!1,sshKeyId:void 0,firewallIds:[],networkIds:[],placementGroupId:void 0,serverImage:void 0,serverType:void 0,serverLocation:void 0,additionalUserData:void 0,serverLabels:{}}),p=(0,r.ref)(!0),x=(0,r.ref)(!0),F=(0,r.ref)(null),O=(0,r.ref)(!1),M=(0,r.ref)(!1),H=(0,r.ref)(!1),R=(0,r.computed)(()=>p.value||l.busy);async function J(){O.value&&(M.value=!0,l.value.serverType=v.serverType?.toString(),l.value.serverLocation=v.serverLocation?.toString(),l.value.imageId=v.serverImage?.toString(),l.value.placementGroup=void 0!==v.placementGroupId&&null!==v.placementGroupId?v.placementGroupId.toString():void 0,l.value.networks=v.networkIds?.map(e=>e?.toString())||[],l.value.firewalls=v.firewallIds?.map(e=>e?.toString())||[],l.value.existingKeyId=void 0!==v.sshKeyId&&null!==v.sshKeyId?v.sshKeyId.toString():void 0,l.value.usePrivateNetwork=v.usePrivateNetwork,v.disablePublicNetwork?(l.value.disablePublic=!0,l.value.disablePublicIpv4=!1,l.value.disablePublicIpv6=!1):(l.value.disablePublic=!1,l.value.disablePublicIpv4=v.disablePublicIpv4,l.value.disablePublicIpv6=v.disablePublicIpv6),l.value.additionalUserData=v.additionalUserData,l.value.userDataFromFile=!0,l.value.serverLabel=v.serverLabels?Object.entries(v.serverLabels).map(([e,a])=>`${e}=${a}`):[],await(0,r.nextTick)(),M.value=!1)}return(0,r.watch)(()=>l.value,async e=>{M.value||(H.value=!0,v.serverType=void 0!==e.serverType&&null!==e.serverType?e.serverType.toString():void 0,v.serverLocation=void 0!==e.serverLocation&&null!==e.serverLocation?e.serverLocation.toString():void 0,v.serverImage=void 0!==e.imageId&&null!==e.imageId?"string"===typeof e.imageId?Number(e.imageId):e.imageId:void 0,v.placementGroupId=void 0!==e.placementGroup&&null!==e.placementGroup?"string"===typeof e.placementGroup?Number(e.placementGroup):e.placementGroup:void 0,v.networkIds=Array.isArray(e.networks)?e.networks.map(e=>"string"===typeof e?Number(e):e):[],v.firewallIds=Array.isArray(e.firewalls)?e.firewalls.map(e=>"string"===typeof e?Number(e):e):[],v.sshKeyId=void 0!==e.existingKeyId&&null!==e.existingKeyId?Number(e.existingKeyId):void 0,v.usePrivateNetwork=e.usePrivateNetwork,v.disablePublicNetwork=e.disablePublic,v.disablePublicIpv4=e.disablePublicIpv4,v.disablePublicIpv6=e.disablePublicIpv6,v.additionalUserData=e.additionalUserData||"",v.serverLabels=Object.fromEntries((e.serverLabel||[]).map(e=>e.split("="))),await(0,r.nextTick)(),H.value=!1)},{immediate:!0,deep:!0}),(0,r.watch)(v,async e=>{let a=!0;e.serverImage&&e.serverType&&e.serverLocation||(a=!1),(e.disablePublicNetwork||e.disablePublicIpv4||e.disablePublicIpv6)&&!e.usePrivateNetwork&&(a=!1),e.usePrivateNetwork&&!e.networkIds?.length&&(a=!1),O.value=a,d("validationChanged",a),a&&!H.value&&await J()},{immediate:!0,deep:!0}),(0,r.watch)(()=>v.serverLocation,async e=>{if(F.value){p.value=!0;try{c.value.serverTypes=await F.value.getServerTypes(e),c.value.serverTypes.some(e=>e.value===v.serverType)||(v.serverType=void 0)}catch(a){m.error("Failed to load server types:",a)}finally{p.value=!1}}}),(0,r.onMounted)(async()=>{F.value=new u(l.credentialId);try{const[e,a,l,r,t,i,s]=await Promise.all([F.value.getLocations(),F.value.getServerTypes(),F.value.getImages(),F.value.getPlacementGroups(),F.value.getNetworks(),F.value.getSshKeys(),F.value.getFirewalls()]);c.value.locations=e,c.value.serverTypes=a,c.value.serverImages=l,c.value.placementGroups=r,c.value.networks=t,c.value.sshKeys=i,c.value.firewalls=s}catch(e){m.error("Failed to load Hetzner data:",e)}p.value=!1,x.value=!1}),(e,a)=>((0,r.openBlock)(),(0,r.createElementBlock)("div",null,[x.value?((0,r.openBlock)(),(0,r.createBlock)(t.A,{key:0,delayed:!0})):(0,r.createCommentVNode)("",!0),(0,r.createElementVNode)("div",b,[(0,r.createElementVNode)("h2",h,(0,r.toDisplayString)(e.t("driver.hetzner.machine.server.title")),1),(0,r.createElementVNode)("div",g,[(0,r.createElementVNode)("div",w,[(0,r.createVNode)(i.A,{value:v.serverLocation,"onUpdate:value":a[0]||(a[0]=e=>v.serverLocation=e),options:c.value.locations,required:"",disabled:R.value,loading:R.value,placeholder:e.t("driver.hetzner.machine.server.location.placeholder"),label:e.t("driver.hetzner.machine.server.location.label")},null,8,["value","options","disabled","loading","placeholder","label"])])]),(0,r.createElementVNode)("div",y,[(0,r.createElementVNode)("div",f,[(0,r.createVNode)(i.A,{value:v.serverType,"onUpdate:value":a[1]||(a[1]=e=>v.serverType=e),options:c.value.serverTypes,required:"",disabled:R.value,loading:R.value,placeholder:e.t("driver.hetzner.machine.server.type.placeholder"),label:e.t("driver.hetzner.machine.server.type.label")},null,8,["value","options","disabled","loading","placeholder","label"])]),(0,r.createElementVNode)("div",I,[(0,r.createVNode)(i.A,{value:v.serverImage,"onUpdate:value":a[2]||(a[2]=e=>v.serverImage=e),options:c.value.serverImages,required:"",disabled:R.value,loading:R.value,placeholder:e.t("driver.hetzner.machine.server.image.placeholder"),label:e.t("driver.hetzner.machine.server.image.label")},null,8,["value","options","disabled","loading","placeholder","label"])])]),(0,r.createElementVNode)("div",N,[(0,r.createElementVNode)("div",k,[(0,r.createVNode)(i.A,{value:v.placementGroupId,"onUpdate:value":a[3]||(a[3]=e=>v.placementGroupId=e),options:c.value.placementGroups,clearable:"",disabled:R.value,loading:R.value,placeholder:e.t("driver.hetzner.machine.server.placementGroup.placeholder"),label:e.t("driver.hetzner.machine.server.placementGroup.label")},null,8,["value","options","disabled","loading","placeholder","label"])])]),(0,r.createElementVNode)("h2",P,(0,r.toDisplayString)(e.t("driver.hetzner.machine.network.title")),1),(0,r.createElementVNode)("div",V,[(0,r.createElementVNode)("div",z,[(0,r.createVNode)(i.A,{value:v.networkIds,"onUpdate:value":a[4]||(a[4]=e=>v.networkIds=e),options:c.value.networks,multiple:"",disabled:R.value,loading:R.value,placeholder:e.t("driver.hetzner.machine.network.networks.placeholder"),label:e.t("driver.hetzner.machine.network.networks.label")},null,8,["value","options","disabled","loading","placeholder","label"])]),(0,r.createElementVNode)("div",E,[(0,r.createVNode)(n.A,{value:v.usePrivateNetwork,"onUpdate:value":a[5]||(a[5]=e=>v.usePrivateNetwork=e),disabled:R.value,label:e.t("driver.hetzner.machine.network.private.label"),description:e.t("driver.hetzner.machine.network.private.description")},null,8,["value","disabled","label","description"])])]),(0,r.createElementVNode)("div",_,[(0,r.createElementVNode)("div",T,[(0,r.createVNode)(n.A,{value:v.disablePublicNetwork,"onUpdate:value":a[6]||(a[6]=e=>v.disablePublicNetwork=e),disabled:R.value||!v.networkIds?.length,label:e.t("driver.hetzner.machine.network.disablePublic.label"),description:e.t("driver.hetzner.machine.network.disablePublic.description")},null,8,["value","disabled","label","description"])]),(0,r.createElementVNode)("div",A,[(0,r.createVNode)(n.A,{value:v.disablePublicIpv4,"onUpdate:value":a[7]||(a[7]=e=>v.disablePublicIpv4=e),disabled:R.value||v.disablePublicNetwork,label:e.t("driver.hetzner.machine.network.disableIPv4.label"),description:e.t("driver.hetzner.machine.network.disableIPv4.description")},null,8,["value","disabled","label","description"])]),(0,r.createElementVNode)("div",S,[(0,r.createVNode)(n.A,{value:v.disablePublicIpv6,"onUpdate:value":a[8]||(a[8]=e=>v.disablePublicIpv6=e),disabled:R.value||v.disablePublicNetwork,label:e.t("driver.hetzner.machine.network.disableIPv6.label"),description:e.t("driver.hetzner.machine.network.disableIPv6.description")},null,8,["value","disabled","label","description"])])]),(0,r.createElementVNode)("div",U,[(0,r.createElementVNode)("div",L,[(0,r.createVNode)(i.A,{value:v.firewallIds,"onUpdate:value":a[9]||(a[9]=e=>v.firewallIds=e),options:c.value.firewalls,multiple:"",disabled:R.value,loading:R.value,placeholder:e.t("driver.hetzner.machine.network.firewalls.placeholder"),label:e.t("driver.hetzner.machine.network.firewalls.label")},null,8,["value","options","disabled","loading","placeholder","label"])]),(0,r.createElementVNode)("div",G,[(0,r.createVNode)(i.A,{value:v.sshKeyId,"onUpdate:value":a[10]||(a[10]=e=>v.sshKeyId=e),options:c.value.sshKeys,clearable:"",disabled:R.value,loading:R.value,placeholder:e.t("driver.hetzner.machine.network.sshKey.placeholder"),label:e.t("driver.hetzner.machine.network.sshKey.label")},null,8,["value","options","disabled","loading","placeholder","label"])])]),(0,r.createElementVNode)("h2",D,(0,r.toDisplayString)(e.t("driver.hetzner.machine.additionalConfig.title")),1),(0,r.createElementVNode)("div",C,[(0,r.createElementVNode)("div",$,[(0,r.createElementVNode)("h3",K,(0,r.toDisplayString)(e.t("driver.hetzner.machine.additionalConfig.userData.label")),1),(0,r.createElementVNode)("div",j,(0,r.toDisplayString)(e.t("driver.hetzner.machine.additionalConfig.userData.description")),1),(0,r.createVNode)(o.A,{value:v.additionalUserData,"onUpdate:value":a[11]||(a[11]=e=>v.additionalUserData=e),disabled:R.value,placeholder:e.t("driver.hetzner.machine.additionalConfig.userData.placeholder"),label:e.t("driver.hetzner.machine.additionalConfig.userData.label"),showCodeEditor:!0,scrolling:!0},null,8,["value","disabled","placeholder","label"])])]),(0,r.createElementVNode)("div",B,[(0,r.createElementVNode)("div",q,[(0,r.createVNode)(s.A,{value:v.serverLabels,"onUpdate:value":a[12]||(a[12]=e=>v.serverLabels=e),valueCanBeEmpty:!0,disabled:R.value,loading:R.value,title:e.t("driver.hetzner.machine.additionalConfig.labels.label"),"three-columns":!1,titleProtip:e.t("driver.hetzner.machine.additionalConfig.labels.description")},null,8,["value","disabled","loading","title","titleProtip"])])])])]))}}),O=(l(8255),l(7433));const M=(0,O.A)(F,[["__scopeId","data-v-4afdca13"]]);var H=M},1177:function(e,a,l){var r={"./csp/metadata.json":6471,"./federal/metadata.json":1862,"./harvester/metadata.json":1507,"./rgs/metadata.json":8401,"./suse/metadata.json":7259};function t(e){var a=i(e);return l(a)}function i(e){if(!l.o(r,e)){var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}return r[e]}t.keys=function(){return Object.keys(r)},t.resolve=i,e.exports=t,t.id=1177},2831:function(e,a,l){"use strict";l.r(a);var r=l(6758),t=l.n(r),i=l(935),s=l.n(i),n=s()(t());n.push([e.id,".hetzner-config .row.vcenter[data-v-4afdca13]{align-items:center}.hetzner-config .description[data-v-4afdca13]{font-size:.9rem;color:var(--input-label)}",""]),a["default"]=n},8255:function(e,a,l){var r=l(2831);r.__esModule&&(r=r.default),"string"===typeof r&&(r=[[e.id,r,""]]),r.locals&&(e.exports=r.locals);var t=l(4825).A;t("27da406b",r,!0,{sourceMap:!1,shadowMode:!1})}}]);
//# sourceMappingURL=hetzner-node-driver-0.1.0.umd.min.machine-config.js.map